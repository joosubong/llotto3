<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <h1 class="text-2xl font-bold text-indigo-600">ğŸ² ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="container mx-auto px-4 py-8">
        <!-- ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ ì„¹ì…˜ -->
        <section class="mb-8">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸</h2>
                <p class="text-gray-600">ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë²ˆí˜¸ë¥¼ ì§ì ‘ ìƒì„±í•˜ì„¸ìš”</p>
            </div>
            
            <!-- ìƒì„± ì˜µì…˜ ì„ íƒ -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                    <div class="flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                        <input type="checkbox" value="weighted" id="weighted_check" class="w-5 h-5 text-indigo-600" checked>
                        <label for="weighted_check" class="flex-1 font-medium text-gray-700 cursor-pointer">í†µê³„ê¸°ë°˜</label>
                        <input type="number" id="weighted_count" value="1" min="1" max="50" class="w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm">
                    </div>
                    <div class="flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                        <input type="checkbox" value="weighted_consecutive" id="weighted_consecutive_check" class="w-5 h-5 text-indigo-600" checked>
                        <label for="weighted_consecutive_check" class="flex-1 font-medium text-gray-700 cursor-pointer">í†µê³„ + ì—°ì† 2ìë¦¬ìˆ˜</label>
                        <input type="number" id="weighted_consecutive_count" value="1" min="1" max="50" class="w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm">
                    </div>
                    <div class="flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                        <input type="checkbox" value="exclude_bottom" id="exclude_bottom_check" class="w-5 h-5 text-indigo-600" checked>
                        <label for="exclude_bottom_check" class="flex-1 font-medium text-gray-700 cursor-pointer">í†µê³„ í•˜ìœ„ 15ê°œ ì œì™¸</label>
                        <input type="number" id="exclude_bottom_count" value="1" min="1" max="50" class="w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm">
                    </div>
                    <div class="flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                        <input type="checkbox" value="exclude_missing" id="exclude_missing_check" class="w-5 h-5 text-indigo-600" checked>
                        <label for="exclude_missing_check" class="flex-1 font-medium text-gray-700 cursor-pointer">í†µê³„ ê¸°ë°˜ + ê¸°ê°„ë³„ ë¯¸ì¶œí˜„ë²ˆí˜¸</label>
                        <input type="number" id="exclude_missing_count" value="1" min="1" max="50" class="w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm">
                    </div>
                </div>
                <div class="text-center flex gap-4 justify-center">
                    <button 
                        onclick="generateSelectedNumbers()" 
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg"
                    >
                        ìƒì„±
                    </button>
                    <button 
                        onclick="resetCustomResults()" 
                        class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg"
                    >
                        ì´ˆê¸°í™”
                    </button>
                </div>
            </div>
            
            <!-- ìƒì„± ê²°ê³¼ í‘œì‹œ -->
            <div id="customResultsContainer" class="bg-white rounded-lg shadow-lg p-6">
                <div class="text-center text-gray-500">
                    <p>ìœ„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
                </div>
            </div>
        </section>

        <!-- 2ì°¨ ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ ì„¹ì…˜ -->
        <section class="mb-8">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">2ì°¨ ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸</h2>
                <p class="text-gray-600">ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ì—ì„œ ìƒì„±ëœ ë²ˆí˜¸ë¡œ ìƒˆë¡œìš´ 10ê°œ ì¡°í•©ì„ ìƒì„±í•©ë‹ˆë‹¤</p>
            </div>
            
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="text-center mb-4">
                    <p id="availableNumbersInfo" class="text-gray-600 mb-4">
                        ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ì—ì„œ ë²ˆí˜¸ë¥¼ ë¨¼ì € ìƒì„±í•´ì£¼ì„¸ìš”.
                    </p>
                    <button 
                        onclick="generateSecondLevelNumbers()" 
                        id="generateSecondBtn"
                        disabled
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg disabled:bg-gray-400 disabled:cursor-not-allowed"
                    >
                        10ê°œ ì¡°í•© ìƒì„±
                    </button>
                </div>
            </div>
            
            <!-- ìƒì„± ê²°ê³¼ í‘œì‹œ -->
            <div id="secondResultsContainer" class="bg-white rounded-lg shadow-lg p-6 mb-4">
                <div class="text-center text-gray-500">
                    <p>ìœ„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
                </div>
            </div>
            
            <!-- ëª¨ë“  ë²ˆí˜¸ ë³µì‚¬ ë²„íŠ¼ -->
            <div class="text-center">
                <button 
                    onclick="copyAllSecondNumbers()" 
                    id="copyAllSecondBtn"
                    disabled
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg disabled:bg-gray-400 disabled:cursor-not-allowed"
                >
                    ëª¨ë“  ë²ˆí˜¸ ë³µì‚¬í•˜ê¸°
                </button>
            </div>
        </section>
    </main>

    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/data.js"></script>
    <script src="js/generate.js"></script>
    <script src="js/ui.js"></script>
    <script>
        // ë²ˆí˜¸ë³„ í†µê³„ ë°ì´í„° (1~1195íšŒì°¨ ê¸°ì¤€)
        const numberStatsData = [
            { number: 1, percent: 96, count: 195 },
            { number: 2, percent: 90, count: 184 },
            { number: 3, percent: 97, count: 198 },
            { number: 4, percent: 94, count: 192 },
            { number: 5, percent: 86, count: 175 },
            { number: 6, percent: 96, count: 195 },
            { number: 7, percent: 97, count: 197 },
            { number: 8, percent: 87, count: 177 },
            { number: 9, percent: 76, count: 156 },
            { number: 10, percent: 90, count: 184 },
            { number: 11, percent: 92, count: 188 },
            { number: 12, percent: 100, count: 203 },
            { number: 13, percent: 99, count: 201 },
            { number: 14, percent: 94, count: 191 },
            { number: 15, percent: 92, count: 187 },
            { number: 16, percent: 94, count: 191 },
            { number: 17, percent: 98, count: 199 },
            { number: 18, percent: 93, count: 190 },
            { number: 19, percent: 92, count: 187 },
            { number: 20, percent: 95, count: 194 },
            { number: 21, percent: 92, count: 188 },
            { number: 22, percent: 78, count: 160 },
            { number: 23, percent: 80, count: 164 },
            { number: 24, percent: 94, count: 192 },
            { number: 25, percent: 82, count: 168 },
            { number: 26, percent: 95, count: 193 },
            { number: 27, percent: 99, count: 202 },
            { number: 28, percent: 86, count: 175 },
            { number: 29, percent: 82, count: 168 },
            { number: 30, percent: 91, count: 185 },
            { number: 31, percent: 94, count: 191 },
            { number: 32, percent: 85, count: 174 },
            { number: 33, percent: 99, count: 202 },
            { number: 34, percent: 100, count: 204 },
            { number: 35, percent: 92, count: 187 },
            { number: 36, percent: 90, count: 183 },
            { number: 37, percent: 95, count: 194 },
            { number: 38, percent: 95, count: 194 },
            { number: 39, percent: 92, count: 187 },
            { number: 40, percent: 94, count: 192 },
            { number: 41, percent: 79, count: 162 },
            { number: 42, percent: 86, count: 176 },
            { number: 43, percent: 97, count: 197 },
            { number: 44, percent: 89, count: 182 },
            { number: 45, percent: 93, count: 189 }
        ];

        // êµ¬ê°„ë³„ ì¶œí˜„ íšŸìˆ˜ ë°ì´í„° (1~1195íšŒì°¨ ê¸°ì¤€)
        const rangeStatsData = [
            { range: '1-5', percent: 38, count: 3 },
            { range: '6-10', percent: 38, count: 3 },
            { range: '11-15', percent: 50, count: 4 },
            { range: '16-20', percent: 12, count: 1 },
            { range: '21-25', percent: 38, count: 3 },
            { range: '26-30', percent: 100, count: 8 },
            { range: '31-35', percent: 62, count: 5 },
            { range: '36-40', percent: 62, count: 5 },
            { range: '41-45', percent: 38, count: 3 }
        ];

        // ê¸°ê°„ë³„ ë¯¸ì¶œí˜„ë²ˆí˜¸ ë°ì´í„°
        const missingNumbersData = [
            { range: '1-10', numbers: [] },
            { range: '11-20', numbers: [18] },
            { range: '21-30', numbers: [] },
            { range: '31-40', numbers: [] },
            { range: '41-45', numbers: [44] }
        ];

        // ë¯¸ì¶œí˜„ë²ˆí˜¸ ì¶”ì¶œ í•¨ìˆ˜
        function getMissingNumbers() {
            const missingNumbers = [];
            missingNumbersData.forEach(item => {
                missingNumbers.push(...item.numbers);
            });
            return missingNumbers;
        }

        // ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ì—ì„œ ìƒì„±ëœ ë²ˆí˜¸ë“¤ì„ ì €ì¥í•˜ëŠ” ì „ì—­ ë³€ìˆ˜
        let generatedNumbersSet = new Set();

        // ì‚¬ìš© ê°€ëŠ¥í•œ ë²ˆí˜¸ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateAvailableNumbersInfo() {
            const infoElement = document.getElementById('availableNumbersInfo');
            const generateBtn = document.getElementById('generateSecondBtn');
            
            if (generatedNumbersSet.size === 0) {
                infoElement.textContent = 'ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ì—ì„œ ë²ˆí˜¸ë¥¼ ë¨¼ì € ìƒì„±í•´ì£¼ì„¸ìš”.';
                generateBtn.disabled = true;
            } else {
                const sortedNumbers = Array.from(generatedNumbersSet).sort((a, b) => a - b);
                infoElement.textContent = `ì‚¬ìš© ê°€ëŠ¥í•œ ë²ˆí˜¸ (${generatedNumbersSet.size}ê°œ): ${sortedNumbers.join(', ')}`;
                generateBtn.disabled = false;
            }
        }

        // í†µê³„ ë°ì´í„°ë¥¼ numberStats í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (êµ¬ê°„ë³„ í†µê³„ í¬í•¨)
        function convertStatsToNumberStats(statsData, rangeStats) {
            const numberStats = {};
            
            // ë²ˆí˜¸ë³„ í†µê³„ ë°ì´í„° ë³€í™˜
            statsData.forEach(item => {
                numberStats[item.number.toString()] = item.count;
            });
            
            // êµ¬ê°„ë³„ í†µê³„ë¥¼ ë²ˆí˜¸ë³„ í†µê³„ì— ì¶”ê°€
            rangeStats.forEach(rangeItem => {
                const [start, end] = rangeItem.range.split('-').map(Number);
                const rangeCount = rangeItem.count;
                const numbersInRange = end - start + 1; // êµ¬ê°„ ë‚´ ë²ˆí˜¸ ê°œìˆ˜
                const additionalWeight = rangeCount / numbersInRange; // êµ¬ê°„ë³„ ì¶œí˜„ íšŸìˆ˜ë¥¼ êµ¬ê°„ ë‚´ ë²ˆí˜¸ ê°œìˆ˜ë¡œ ë‚˜ëˆ”
                
                // í•´ë‹¹ êµ¬ê°„ì˜ ëª¨ë“  ë²ˆí˜¸ì— ê°€ì¤‘ì¹˜ ì¶”ê°€
                for (let num = start; num <= end; num++) {
                    const numKey = num.toString();
                    if (numberStats[numKey]) {
                        numberStats[numKey] += additionalWeight;
                    } else {
                        numberStats[numKey] = additionalWeight;
                    }
                }
            });
            
            return numberStats;
        }

        // ì„ íƒëœ ë°©ì‹ìœ¼ë¡œ ë²ˆí˜¸ ìƒì„±
        function generateSelectedNumbers() {
            // ì„ íƒëœ ì²´í¬ë°•ìŠ¤ ê°€ì ¸ì˜¤ê¸°
            const checkboxes = document.querySelectorAll('input[type="checkbox"][value]:checked');
            
            if (checkboxes.length === 0) {
                alert('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ìƒì„± ë°©ì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // í†µê³„ ë°ì´í„°ë¥¼ numberStats í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (êµ¬ê°„ë³„ í†µê³„ í¬í•¨)
            const numberStats = convertStatsToNumberStats(numberStatsData, rangeStatsData);
            
            // ê²°ê³¼ í‘œì‹œ
            const container = document.getElementById('customResultsContainer');
            container.innerHTML = '';
            
            const innerContainer = document.createElement('div');
            innerContainer.className = 'flex flex-col gap-4';
            
            // ê° ì„ íƒëœ ë°©ì‹ì— ëŒ€í•´ ë²ˆí˜¸ ìƒì„±
            let resultIndex = 0;
            checkboxes.forEach((checkbox) => {
                const type = checkbox.value;
                // ê°œìˆ˜ ì…ë ¥ í•„ë“œì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
                const countInput = document.getElementById(`${type}_count`);
                const count = parseInt(countInput.value) || 1;
                
                // ì„¤ì •ëœ ê°œìˆ˜ë§Œí¼ ë²ˆí˜¸ ìƒì„±
                for (let i = 0; i < count; i++) {
                    let numbers = [];

                    switch(type) {
                        case 'weighted':
                            // í†µê³„ê¸°ë°˜
                            numbers = numberGenerator.generateWeightedNumbers(6, numberStats);
                            break;
                        case 'weighted_consecutive':
                            // í†µê³„ + ì—°ì† 2ìë¦¬ìˆ˜
                            numbers = numberGenerator.generateWeightedWithConsecutive(6, numberStats);
                            break;
                        case 'exclude_bottom':
                            // í†µê³„ í•˜ìœ„ 15ê°œ ì œì™¸
                            const bottomNumbers = numberGenerator.getBottomNumbers(numberStats, 15);
                            numbers = numberGenerator.generateWeightedNumbers(6, numberStats, bottomNumbers);
                            break;
                        case 'exclude_missing':
                            // í†µê³„ ê¸°ë°˜ + ê¸°ê°„ë³„ ë¯¸ì¶œí˜„ë²ˆí˜¸ ì œì™¸
                            const missingNumbers = getMissingNumbers();
                            numbers = numberGenerator.generateWeightedNumbers(6, numberStats, missingNumbers);
                            break;
                    }

                    const numbersContainer = document.createElement('div');
                    numbersContainer.className = 'flex flex-wrap items-center gap-1 justify-center';
                    numbersContainer.id = `customNumbersContainer_${resultIndex}`;
                    
                    // ì›ë³¸ ìƒ‰ìƒ ì •ë³´ ì €ì¥
                    const originalColors = [];
                    
                    numbers.forEach((num, numIndex) => {
                        // ìƒì„±ëœ ë²ˆí˜¸ë¥¼ Setì— ì¶”ê°€
                        generatedNumbersSet.add(num);
                        
                        const numberBadge = uiManager.createNumberBadge(num);
                        numberBadge.dataset.originalColor = numberBadge.className;
                        originalColors.push({
                            element: numberBadge,
                            originalColor: numberBadge.className
                        });
                        numbersContainer.appendChild(numberBadge);
                    });
                    
                    // ì‚¬ìš© ê°€ëŠ¥í•œ ë²ˆí˜¸ ì •ë³´ ì—…ë°ì´íŠ¸
                    updateAvailableNumbersInfo();
                    
                    // í™•ì¸ ë²„íŠ¼ (ë²ˆí˜¸ ì˜†ì— ë°°ì¹˜)
                    const checkButton = document.createElement('button');
                    checkButton.className = 'bg-white border border-gray-300 text-gray-700 font-medium py-1 px-2 rounded-lg hover:bg-gray-50 transition-all text-xs';
                    checkButton.textContent = 'í™•ì¸';
                    
                    // í´ë¡œì €ë¡œ ê°’ ì €ì¥
                    const currentIndex = resultIndex;
                    const currentNumbers = [...numbers];
                    const currentContainer = numbersContainer;
                    const originalColorsRef = originalColors;
                    let isGray = false; // í˜„ì¬ ìƒíƒœ ì¶”ì 
                    
                    // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (í† ê¸€: íšŒìƒ‰ â†” ì›ë˜ ìƒ‰)
                    checkButton.addEventListener('click', () => {
                        const badges = currentContainer.querySelectorAll('span[data-original-color]');
                        
                        if (!isGray) {
                            // íšŒìƒ‰ìœ¼ë¡œ ë³€ê²½
                            badges.forEach((badge, badgeIndex) => {
                                badge.className = 'inline-flex items-center justify-center w-[30px] h-[30px] rounded-full font-bold text-xs border-2 bg-gray-200 text-gray-700 border-gray-300';
                            });
                            isGray = true;
                            
                            // ë²ˆí˜¸ ë³µì‚¬
                            const numbersText = currentNumbers.join(' ');
                            uiManager.copyToClipboard(numbersText);
                        } else {
                            // ì›ë˜ ìƒ‰ìƒìœ¼ë¡œ ë³µì›
                            badges.forEach((badge, badgeIndex) => {
                                const originalColor = originalColorsRef[badgeIndex].originalColor;
                                badge.className = originalColor;
                            });
                            isGray = false;
                        }
                    });
                    
                    numbersContainer.appendChild(checkButton);
                    innerContainer.appendChild(numbersContainer);
                    resultIndex++;
                }
            });
            
            container.appendChild(innerContainer);
        }

        // ê²°ê³¼ ì´ˆê¸°í™” í•¨ìˆ˜
        function resetCustomResults() {
            const container = document.getElementById('customResultsContainer');
            container.innerHTML = `
                <div class="text-center text-gray-500">
                    <p>ìœ„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
                </div>
            `;
            // ìƒì„±ëœ ë²ˆí˜¸ Setë„ ì´ˆê¸°í™”
            generatedNumbersSet.clear();
            updateAvailableNumbersInfo();
        }

        // 2ì°¨ ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ ìƒì„± í•¨ìˆ˜
        function generateSecondLevelNumbers() {
            if (generatedNumbersSet.size < 6) {
                alert('ìµœì†Œ 6ê°œ ì´ìƒì˜ ë²ˆí˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì§ì ‘ ë§Œë“œëŠ” ë²ˆí˜¸ì—ì„œ ë” ë§ì€ ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                return;
            }

            const availableNumbers = Array.from(generatedNumbersSet).sort((a, b) => a - b);
            const container = document.getElementById('secondResultsContainer');
            container.innerHTML = '';

            const innerContainer = document.createElement('div');
            innerContainer.className = 'flex flex-col gap-4';

            // í†µê³„ ë°ì´í„°ë¥¼ numberStats í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            const fullNumberStats = convertStatsToNumberStats(numberStatsData, rangeStatsData);
            
            // 1ì°¨ì—ì„œ ìƒì„±ëœ ë²ˆí˜¸ë“¤ë§Œ í¬í•¨í•˜ëŠ” í•„í„°ë§ëœ í†µê³„ ìƒì„±
            const filteredNumberStats = {};
            availableNumbers.forEach(num => {
                const numKey = num.toString();
                if (fullNumberStats[numKey]) {
                    filteredNumberStats[numKey] = fullNumberStats[numKey];
                } else {
                    filteredNumberStats[numKey] = 1; // í†µê³„ê°€ ì—†ìœ¼ë©´ ìµœì†Œ ê°€ì¤‘ì¹˜
                }
            });

            // 10ê°œ ì¡°í•© ìƒì„± (í†µê³„ ê¸°ë°˜)
            for (let i = 0; i < 10; i++) {
                // í†µê³„ ê¸°ë°˜ìœ¼ë¡œ 6ê°œ ë²ˆí˜¸ ì„ íƒ
                const numbers = numberGenerator.generateWeightedNumbers(6, filteredNumberStats);

                const numbersContainer = document.createElement('div');
                numbersContainer.className = 'flex flex-wrap items-center gap-1 justify-center';
                numbersContainer.id = `secondNumbersContainer_${i}`;
                
                // ì›ë³¸ ìƒ‰ìƒ ì •ë³´ ì €ì¥
                const originalColors = [];
                
                numbers.forEach((num, numIndex) => {
                    const numberBadge = uiManager.createNumberBadge(num);
                    numberBadge.dataset.originalColor = numberBadge.className;
                    originalColors.push({
                        element: numberBadge,
                        originalColor: numberBadge.className
                    });
                    numbersContainer.appendChild(numberBadge);
                });
                
                // í™•ì¸ ë²„íŠ¼ (ë²ˆí˜¸ ì˜†ì— ë°°ì¹˜)
                const checkButton = document.createElement('button');
                checkButton.className = 'bg-white border border-gray-300 text-gray-700 font-medium py-1 px-2 rounded-lg hover:bg-gray-50 transition-all text-xs';
                checkButton.textContent = 'í™•ì¸';
                
                // í´ë¡œì €ë¡œ ê°’ ì €ì¥
                const currentNumbers = [...numbers];
                const currentContainer = numbersContainer;
                const originalColorsRef = originalColors;
                let isGray = false; // í˜„ì¬ ìƒíƒœ ì¶”ì 
                
                // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (í† ê¸€: íšŒìƒ‰ â†” ì›ë˜ ìƒ‰)
                checkButton.addEventListener('click', () => {
                    const badges = currentContainer.querySelectorAll('span[data-original-color]');
                    
                    if (!isGray) {
                        // íšŒìƒ‰ìœ¼ë¡œ ë³€ê²½
                        badges.forEach((badge, badgeIndex) => {
                            badge.className = 'inline-flex items-center justify-center w-[30px] h-[30px] rounded-full font-bold text-xs border-2 bg-gray-200 text-gray-700 border-gray-300';
                        });
                        isGray = true;
                        
                        // ë²ˆí˜¸ ë³µì‚¬
                        const numbersText = currentNumbers.join(' ');
                        uiManager.copyToClipboard(numbersText);
                    } else {
                        // ì›ë˜ ìƒ‰ìƒìœ¼ë¡œ ë³µì›
                        badges.forEach((badge, badgeIndex) => {
                            const originalColor = originalColorsRef[badgeIndex].originalColor;
                            badge.className = originalColor;
                        });
                        isGray = false;
                    }
                });
                
                numbersContainer.appendChild(checkButton);
                innerContainer.appendChild(numbersContainer);
            }
            
            container.appendChild(innerContainer);
            
            // ëª¨ë“  ë²ˆí˜¸ ë³µì‚¬ ë²„íŠ¼ í™œì„±í™”
            const copyAllBtn = document.getElementById('copyAllSecondBtn');
            if (copyAllBtn) {
                copyAllBtn.disabled = false;
            }
        }

        // ëª¨ë“  2ì°¨ ë²ˆí˜¸ ë³µì‚¬ í•¨ìˆ˜
        function copyAllSecondNumbers() {
            const container = document.getElementById('secondResultsContainer');
            const numberContainers = container.querySelectorAll('[id^="secondNumbersContainer_"]');
            
            if (numberContainers.length === 0) {
                alert('ìƒì„±ëœ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const allNumbers = [];
            numberContainers.forEach(container => {
                const badges = container.querySelectorAll('span[data-original-color]');
                const numbers = Array.from(badges).map(badge => badge.textContent.trim());
                allNumbers.push(numbers.join(' '));
            });
            
            // ê° ì¡°í•©ì„ ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ë³µì‚¬
            const numbersText = allNumbers.join('\n');
            uiManager.copyToClipboard(numbersText);
            
            // ë³µì‚¬ ì™„ë£Œ ì•Œë¦¼ (ì„ íƒì‚¬í•­)
            alert(`${allNumbers.length}ê°œ ì¡°í•©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }
    </script>
</body>
</html>
